@model InvoiceGenerator.Models.Item

@{
    ViewData["Title"] = "Inventory Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    var AREA_NAME = Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.GetNormalizedRouteValue(ViewContext, "area");
    var CONTROLLER_NAME = this.ViewContext.RouteData.Values["controller"].ToString();


}



@section HEAD{
    <style>
        .col {
            word-break: break-all;
        }

        .layout4 .svg-arrows-rep {
            margin: auto !important
        }
    </style>
}

<main id="main">
    <!-- Breadcrumb -->

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb rounded-0 bg-transparent">
            <li class="breadcrumb-item">
                <a href='@Url.Action("Index")'>@Localizer["Item Directory"]</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page"> @Localizer["Item Details"] </li>
        </ol>
    </nav>

    <div class="content-box bg-white">
        <div class=" title-bar d-flex justify-content-start mx-0 px-0">
            <a href='@Url.Action("Index")'>
                @*<img src="~/icons/Back.png" />*@
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="svg-arrows-rep" width="47" viewBox="0 0 47 47">
                    <defs>
                        <filter id="Ellipse_23" x="0" y="0" width="47" height="47" filterUnits="userSpaceOnUse">
                            <feOffset dy="3" input="SourceAlpha"/>
                            <feGaussianBlur stdDeviation="3" result="blur"/>
                            <feFlood flood-opacity="0.161"/>
                            <feComposite operator="in" in2="blur"/>
                            <feComposite in="SourceGraphic"/>
                        </filter>
                    </defs>
                    <g id="Group_455" data-name="Group 455" transform="translate(9 35.418) rotate(-90)">
                        <g transform="matrix(0, 1, -1, 0, 35.42, -9)" filter="url(#Ellipse_23)">
                            <g id="Ellipse_23-2" data-name="Ellipse 23" transform="translate(9 35) rotate(-90)" stroke-width="2">
                                <circle cx="14.5" cy="14.5" r="14.5" stroke="none"/>
                                <circle cx="14.5" cy="14.5" r="13.5" fill="none"/>
                            </g>
                        </g>
                        <g id="Group_124" data-name="Group 124" transform="translate(20.829 17.97) rotate(180)">
                            <path id="Path_22" data-name="Path 22" d="M0,6.349,6.419,0,12.5,6.349" transform="translate(12.5 6.349) rotate(180)" stroke-width="2"/>
                        </g>
                    </g>
                </svg>
            </a>
            <h3 class="text-main mx-3">@Localizer["Item Details"] </h3>
        </div>

        <!--Error messages section  -->
        <div id="errorMessage"></div>
        <!-- End error message -->
        <!-- Info Block -->

        <div class="card mb-4">
            <div class="card-body pt-2 pb-2">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h2 class="text-main font-5 font-bold">@Model.Name</h2>
                    <div class="item">
                        <button class="btn btn-primary" id="printBarcode">@Localizer["Print Barcode"]</button>
                        <a href='@Url.Action("Edit")/@Model.ItemID' class="text-center">
                            @*<img src="~/icons/edit.svg" class="o" />*@
                            <svg xmlns="http://www.w3.org/2000/svg" class="o svg-edit" xmlns:xlink="http://www.w3.org/1999/xlink" width="42" height="42" viewBox="0 0 42 42">
                                <defs>
                                    <filter id="a" x="0" y="0" width="42" height="42" filterUnits="userSpaceOnUse">
                                        <feOffset dy="3" input="SourceAlpha"/><feGaussianBlur stdDeviation="3" result="b"/><feFlood flood-color="#5068B8" flood-opacity="0.161"/><feComposite operator="in" in2="b"/><feComposite in="SourceGraphic"/>
                                    </filter>
                                </defs>
                                <g transform="translate(9 6)">
                                    <g class="c" transform="matrix(1, 0, 0, 1, -9, -6)">
                                        <circle class="a" cx="12" cy="12" r="12" transform="translate(9 6)"/>
                                    </g><path class="b" d="M-4358.714-948a1.286,1.286,0,0,1-1.286-1.286v-8.571a1.286,1.286,0,0,1,1.286-1.286h5.143a.428.428,0,0,1,.428.428.428.428,0,0,1-.428.429h-5.143a.429.429,0,0,0-.429.429v8.571a.429.429,0,0,0,.429.429H-4351a.429.429,0,0,0,.429-.429v-4.286a.428.428,0,0,1,.428-.429.429.429,0,0,1,.429.429v4.286A1.286,1.286,0,0,1-4351-948Zm1.579-2.593a.429.429,0,0,1-.271-.542l.857-2.571a.437.437,0,0,1,.1-.168l5.645-5.645a1.629,1.629,0,0,1,1.16-.481,1.641,1.641,0,0,1,1.16.481,1.641,1.641,0,0,1,0,2.32l-5.645,5.645a.427.427,0,0,1-.168.1l-2.571.857a.44.44,0,0,1-.136.022A.431.431,0,0,1-4357.135-950.594Zm6.94-8.318-5.574,5.571-.554,1.662,1.665-.556,5.571-5.571a.779.779,0,0,0,.229-.554.781.781,0,0,0-.229-.551.783.783,0,0,0-.555-.23A.782.782,0,0,0-4350.195-958.912Z" transform="translate(4366 966)"/>
                                </g>
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-7">
                        <div class="row">
                            <div class="col-sm-12 col-md-6 d-flex">
                                <b>@Html.DisplayNameFor(model => model.ShelfNumber): </b> &nbsp;<span>@Html.DisplayFor(model => model.ShelfNumber)</span>
                            </div>
                            <div class="col-sm-12 col-md-6 d-flex">
                                <b>@Html.DisplayNameFor(model => model.StorageType): </b> &nbsp;<span>@Html.DisplayFor(model => model.StorageType)</span>
                            </div>
                            <div class="col-sm-12 col-md-6 d-flex">
                                <b>@Html.DisplayNameFor(model => model.StorageSction): </b> &nbsp;<span>@Html.DisplayFor(model => model.StorageSction)</span>
                            </div>
                            <div class="col-sm-12 col-md-6 d-flex">
                                <b>@Html.DisplayNameFor(model => model.Bin): </b> &nbsp;<span>@Html.DisplayFor(model => model.Bin)</span>
                            </div>
                            <div class="col-sm-12 col-md-6 d-flex">
                                <b>@Html.DisplayNameFor(model => model.ThresholdQuantity): </b> &nbsp;<span>@Html.DisplayFor(model => model.ThresholdQuantity)</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-5">
                        <div class="row">
                            <div class="col-6">
                                <h6 class="text-main text-center">SAR @Html.DisplayFor(model => model.RetailCostPrice)</h6>
                                <p class="text-center">@Html.DisplayNameFor(model => model.RetailCostPrice)</p>
                            </div>
                            <div class="col-6">
                                <h6 class="text-main text-center">SAR @Html.DisplayFor(model => model.RetailSellPrice)</h6>
                                <p class="text-center">@Html.DisplayNameFor(model => model.RetailSellPrice)</p>
                            </div>
                            <div class="col offset-4">
                                <div class="d-flex justify-content-end align-items-center">
                                    <svg id="item-barcode"></svg>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="d-flex justify-content-end align-items-center">
                                    <svg id="item-id-barcode" width="120"></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</main>


@section Scripts{


    <script>
        $(() => {
               JsBarcode("#item-id-barcode", "@Model.ItemID", {
                height: 40, width: 1
               });
            if ("@Model.SupplierBarCode") {
                JsBarcode("#item-barcode", "@Model.SupplierBarCode", {
                    height: 40, width: 1
                });
            } else {
                $("#item-barcode").parent().remove()
            }
            $("#printBarcode").click(function () {
                let html = '';
                
                html += document.getElementById('item-id-barcode')?.outerHTML
                PrintComponent(html)
            })
          
          
        })

    </script>
}